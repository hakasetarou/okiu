<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>沖縄国際大学 駐車場管理システム</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- ★★★ ログイン画面 START ★★★ -->
    <div id="loginScreen">
        <div class="login-container">
            <div class="login-header">
                <h1>駐車場管理システム</h1>
                <p class="subtitle">ログインまたは新規登録をしてください</p>
            </div>
            
            <div id="errorMessage" class="error-message hidden"></div>

            <!-- ログインフォーム -->
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label for="loginStudentId">学籍番号</label>
                    <input type="text" id="loginStudentId" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">パスワード</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="login-btn">ログイン</button>
                <p class="switch-mode">
                    アカウントをお持ちでないですか？ <a href="#" id="switchToRegisterLink">新規登録</a>
                </p>
            </form>

            <!-- 新規登録フォーム -->
            <form id="registerForm" class="login-form hidden">
                <div class="form-group">
                    <label for="registerStudentId">学籍番号</label>
                    <input type="text" id="registerStudentId" required>
                </div>
                 <div class="form-group">
                    <label for="registerName">氏名</label>
                    <input type="text" id="registerName" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">パスワード</label>
                    <input type="password" id="registerPassword" required>
                </div>
                <div class="form-group">
                    <label for="registerPasswordConfirm">パスワード (確認用)</label>
                    <input type="password" id="registerPasswordConfirm" required>
                </div>
                <button type="submit" class="register-btn">登録する</button>
                 <p class="switch-mode">
                    すでにアカウントをお持ちですか？ <a href="#" id="switchToLoginLink">ログイン</a>
                </p>
            </form>
        </div>
    </div>
    <!-- ★★★ ログイン画面 END ★★★ -->


    <!-- ★★★ 駐車場システム本体 START (初期状態では非表示) ★★★ -->
    <div id="mainSystem" class="hidden">
        <div class="container">
            <div class="header">
                <div id="userInfo" class="user-info"></div>
                <button id="logoutButton" class="logout-btn">ログアウト</button>
                <h1> 沖縄国際大学</h1>
                <div class="subtitle">駐車場管理システム</div>
                <div class="last-updated" id="lastUpdated">最終更新: --</div>
            </div>
            
            <div id="myParkingStatus" class="my-parking-status hidden">
                <!-- 自分の駐車状況がここに表示されます -->
            </div>

            <div class="stats-bar">
                <div class="stat-item">
                    <span class="stat-number" id="totalSpaces">--</span>
                    <span>総駐車台数</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="availableSpaces">--</span>
                    <span>総空き台数</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="occupancyRate">--%</span>
                    <span>全体使用率</span>
                </div>
            </div>

            <div class="parking-lots" id="parkingLots">
                <!-- 駐車場一覧がここに表示されます -->
            </div>
        </div>
    </div>
    <!-- ★★★ 駐車場システム本体 END ★★★ -->


    <!-- 駐車場詳細マップ表示用モーダル -->
    <div id="lotDetailModal" class="modal">
        <div class="modal-content large">
            <span id="closeModalButton" class="close">&times;</span>
            <h2 id="lotDetailTitle"></h2>
            <p class="modal-instruction">空いているスペース（緑色）をクリックして駐車登録してください。</p>
            <div class="parking-map-container" id="parkingMap">
                <!-- ここにJavaScriptで駐車場マップが描画されます -->
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
